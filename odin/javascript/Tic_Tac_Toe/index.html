<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe</title>
    <link rel='stylesheet' href='style.css' />
</head>

<body>
    <div class="panel">
        <div class="gameBoard">
        </div>
        <div>
            <button id="start">Start game</button>
            <div class="messageMove"></div>
            <div class="winner"></div>
        </div>
    </div>
    <script src="gameboard.js"></script>
    <script src="player.js"></script>
    <script src="app.js"></script>
    <script src="test.js"></script>
    <script>
        Gameboard.setGameBoard([[1, 2, 3], [4, 5, 6], [7, 8, 9]])
        let gameBoardHTML = document.querySelector('.gameBoard');
        for (let i = 0; i < Gameboard.getRowGameBoard(); i++) {
            let rowElemGameBoard = document.createElement('div');
            rowElemGameBoard.setAttribute('class', 'rowElemGameBoard');
            for (let j = 0; j < Gameboard.getRowGameBoard(); j++) {
                let elemGameBoard = document.createElement('div');
                elemGameBoard.addEventListener('click', () => {
                    console.log(player1.getMove(), player2.getMove());
                    if (elemGameBoard.textContent == '') {
                        if (player1.getMove()) {
                            elemGameBoard.textContent = player1.getElem();
                            player1.setMove(false);
                            player2.setMove(true);
                            Gameboard.setElemByGameNoard(player1.getElem(), i, j);
                            const result = Gameboard.checkResult();
                            console.log(result);
                            if (result != 'next') {
                                player1.setMove(false);
                                player2.setMove(false);
                                alert('Stop! Win - ' + result);
                                return
                            }
                            returnMessageMove();
                            return;
                        }
                        if (player2.getMove()) {
                            elemGameBoard.textContent = player2.getElem();
                            player1.setMove(true);
                            player2.setMove(false);
                            Gameboard.setElemByGameNoard(player2.getElem(), i, j);
                            const result = Gameboard.checkResult();
                            console.log(result);
                            if (result != 'next') {
                                player1.setMove(false);
                                player2.setMove(false);
                                alert('Stop! Win - ' + result);
                                return
                            }
                            returnMessageMove();
                            return;
                        }
                        console.log(Gameboard.getGameBoard());
                    }
                })
                rowElemGameBoard.appendChild(elemGameBoard);
            }
            gameBoardHTML.appendChild(rowElemGameBoard);
        }

        const player1 = Player('Player1', 'x');
        const player2 = Player('Player2', 'o');

        player1.setMove(true);
        function returnMessageMove() {
            let messageMove = document.querySelector('.messageMove');
            messageMove.textContent = 'Ход игрока ';
            if (player1.getMove()) messageMove.textContent += player1.getName();
            else messageMove.textContent += player2.getName();
        }
        returnMessageMove();
        // console.log(player1.getMove(), player2.getMove());
    </script>
</body>

</html>